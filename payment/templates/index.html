<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Checkout</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; padding:30px; }
    .checkout-box { background:#fff; padding:20px; width:500px; margin:auto; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,.1); }
    .checkout-box h2 { color:#ee4d2d; margin-bottom:20px; }
    .payment-method { display:flex; align-items:center; border:2px solid #ddd; padding:10px; margin-bottom:10px; border-radius:8px; cursor:pointer; transition:.3s; }
    .payment-method img { width:60px; margin-right:15px; }
    .payment-method:hover { border-color:#ee4d2d; }
    input[type="radio"] { display:none; }
    input[type="radio"]:checked + label { border-color:#ee4d2d; background:#fff4f1; }
    .pay-btn { background:#ee4d2d; color:#fff; border:none; padding:12px 20px; border-radius:8px; font-size:16px; cursor:pointer; width:100%; }
    .pay-btn:hover { background:#d63c1f; }
  </style>
</head>
<body>
  <div class="checkout-box">
    <h2>Checkout</h2>
    <p><a href="{{ url_for('payment.cancel') }}" style="color: #504f4f; text-decoration: none;">‚Üê Back to Home</a></p>
    <p>Order: <b>{{ transaction.product_id }}</b></p>
    <p>Total: <b>RM {{ "%.2f"|format(grand_total) }}</b></p>
    
    <form id="paymentForm" method="GET">
    <div>
      <input type="radio" id="secondlooppay" name="payment_method" value="secondlooppay" checked>
      <label class="payment-method" for="secondlooppay">
        <img src="https://img.icons8.com/color/96/wallet.png" alt="SecondLoopPay"> SecondLoopPay (Wallet)
      </label>
    </div>
    
    <div>
      <input type="radio" id="cod" name="payment_method" value="cod">
      <label class="payment-method" for="cod">
        <img src="https://img.icons8.com/color/96/cash.png" alt="COD"> Cash on Delivery (COD)
      </label>
    </div>

    <button class="pay-btn" type="submit">Proceed to Pay</button>
    </form>


    <script>
      document.getElementById("paymentForm").addEventListener("submit", function(e) {
        e.preventDefault();
        const choice = document.querySelector('input[name="payment_method"]:checked').value;
        if (choice === "secondlooppay") {
          this.action = "{{ url_for('payment.secondlooppay') }}";
        } else if (choice === "cod") {
          this.action = "{{ url_for('payment.cod') }}";
        }
        this.submit();
      });
    </script>
  </div>
</body>
</html>