{% extends "base.html" %}

{% block title %}
  {% if product %}Edit Product{% else %}Add Product{% endif %}
{% endblock %}

{% block content %}
<div class="container">
  <h2>{% if product %}Edit Product{% else %}Add Product{% endif %}</h2>

  <form method="POST" enctype="multipart/form-data">
    <div class="mb-3">
      <label for="name" class="form-label">Product Name</label>
      <input type="text" class="form-control" id="name" name="name"
             value="{{ product.name if product else '' }}" required>
    </div>

    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <textarea class="form-control" id="description" name="description" rows="3" required>{{ product.description if product else '' }}</textarea>
    </div>

    <div class="mb-3">
      <label for="price" class="form-label">Price (RM)</label>
      <input type="number" class="form-control" id="price" name="price" step="0.01"
             value="{{ product.price if product else '' }}" required>
    </div>

    <div class="mb-3">
      <label for="image" class="form-label">Product Image</label>
      <input type="file" class="form-control" id="image" name="image">
      {% if product and product.image %}
        <p class="mt-2">Current Image:</p>
        <img src="{{ url_for('static', filename='uploads/' ~ product.image) }}" 
             alt="Product Image" width="150">
      {% endif %}
    </div>

    <button type="submit" class="btn btn-success">
      {% if product %}Update Product{% else %}Add Product{% endif %}
    </button>

    {% if product %}
    <button type="submit" name="delete" value="true" class="btn btn-danger"
            onclick="return confirm('Are you sure you want to delete this product?');">
      Delete
    </button>
    {% endif %}
  </form>
</div>
{% endblock %}